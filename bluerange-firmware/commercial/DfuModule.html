<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dfu Module (ID 4) :: Fruitymesh</title>
    <link rel="canonical" href="https://www.bluerange.io/docs/opensource/bluerange-firmware/commercial/DfuModule.html">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.bluerange.io/docs/opensource">Fruitymesh</a>
    </div>

    <div class="navbar-end">
      <div class="link navbar-item" id="header-github-logo">
        <a class="link navbar-item" href="https://github.com/mwaylabs/fruitymesh" target="_blank"></a>
      </div>
      <div class="navbar-item">
        <input id="search-input" type="text" placeholder="Search docs">
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="bluerange-firmware" data-version="master">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title">
      <a href="../index.html">bluerange-firmware</a>
    </h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Quick-Start.html">Quick Start</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Usage.html">Usage</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Developers.html">Developers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Specification.html">Specification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../Modules.html">Modules</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../AdvertisingModule.html">AdvertisingModule</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DebugModule.html">DebugModule</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DfuModule.html">DfuModule</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../EnrollmentModule.html">EnrollmentModule</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../IoModule.html">IoModule</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../MeshAccessModule.html">MeshAccessModule</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Node.html">Node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ScanningModule.html">ScanningModule</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../StatusReporterModule.html">StatusReporterModule</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Other Classes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Logger.html">Logger</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../RecordStorage.html">RecordStorage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Other</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Class-Structure.html">Class Structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Battery-Consumption.html">Battery Consumption</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../RecordStorage.html">RecordStorage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../The-FruityMesh-Algorithm.html">The FruityMesh Algorithm</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../The-Algorithm-in-Detail.html">In Detail</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Simulator.html">Simulator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../Tutorials.html">Tutorials</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Implementing-a-Custom-Module.html">Implementing a Custom Module</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../FAQ.html">FAQ</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">bluerange-firmware</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">bluerange-firmware</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">bluerange-firmware</a></li>
    <li class="crumb"><a href="DfuModule.html">Dfu Module (ID 4)</a></li>
  </ul>
</nav>
</div>
<article class="doc">
<h1>Dfu Module (ID 4)</h1>
<div class="sect1">
<h2 id="_purpose"><a class="anchor" href="#_purpose"></a>Purpose</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Mesh DFU provides functionality for updating softdevice, bootloader
and the app on fruitymesh chips and also updating third party components
that are attached to the controller via some bus using specially
implemented commands. In case there are multiple updates to be applied
sequentially, this is called an update sequence.</p>
</div>
<div class="paragraph">
<p>For an overview of the whole platform DFU sequence, see DFU Overview.
For more information about the memory layout, see DFU &amp; Memory Layout.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_errorcode_handling"><a class="anchor" href="#_errorcode_handling"></a>ErrorCode Handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The DFUModule uses a set of different error codes that must be handled
differently depending on the code. Below is a table of all error codes
and how they should be handled. Possible error handling types are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ok: No error handling necessary</p>
</li>
<li>
<p>fail: Mark the whole update sequence as failed and also mark the node
as failed with the error code.</p>
</li>
<li>
<p>remove node: Remove the node from the list of nodes to update and mark
it as updated (if possible mark it with: was not updated)</p>
</li>
<li>
<p>fail only node: Mark the node as failed, remove it from the list of
nodes to update and continue</p>
</li>
<li>
<p>retry: Last command must be retried</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functionality"><a class="anchor" href="#_functionality"></a>Functionality</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_enrolling_over_the_mesh"><a class="anchor" href="#_enrolling_over_the_mesh"></a>Enrolling over the Mesh</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_terminal_commands"><a class="anchor" href="#_terminal_commands"></a>Terminal Commands</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_nordic_secure_dfu"><a class="anchor" href="#_nordic_secure_dfu"></a>Nordic Secure DFU</h3>
<div class="paragraph">
<p><code>ndfu [nodeId]</code></p>
</div>
<div class="paragraph">
<p>The Nordic Secure DFU is the DFU bootloader provided from nRF5 SDK. Detailed description about Nordic Secure DFU can be found in <a href="https://infocenter.nordicsemi.com/index.jsp?topic=%2Fcom.nordic.infocenter.sdk5.v15.0.0%2Fble_sdk_app_dfu_bootloader.html">nordic documentation</a></p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">//start the nordic secure dfu of the node having nodeId 200
ndfu 200</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_start_dfu"><a class="anchor" href="#_start_dfu"></a>Start DFU</h3>
<div class="paragraph">
<p><code>dfu_start [nodeId] [imageType] [numChunks] [chunkSizeExponent] [imageCRC] [firmwareVersion] [requestHandle] [moduleId] [componentId]</code></p>
</div>
<div class="paragraph">
<p>The node will verify all conditions and respond with either error or ok. If all conditions are verified, it will clear enough free space to receive data and respond with ok.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">//start the dfu of the device having nodeId 200
dfu_start 200 1 200 6 53856 1540449174 2 0 0</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_start_dfu_ignoring_masterid"><a class="anchor" href="#_start_dfu_ignoring_masterid"></a>Start DFU Ignoring Masterid</h3>
<div class="paragraph">
<p><code>dfu_start_nomaster [nodeId] [imageType] [numChunks] [chunkSizeExponent] [imageCRC] [firmwareVersion] [requestHandle] [moduleId] [componentId]</code></p>
</div>
<div class="paragraph">
<p>The node will respond the same as <code>dfu_start</code> command but in this case the nodeId of dfuMaster will not be saved and compared against the dfu start settings for further packets. Refer to
<a href="#">Messages</a> for more information</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">//start the nomaster dfu of the device having nodeId 200
dfu_start_nomaster 200 1 200 6 53856 1540449174 2 0 0</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sending_dfu_data"><a class="anchor" href="#_sending_dfu_data"></a>Sending DFU Data</h3>
<div class="paragraph">
<p><code>dfu_data [nodeId] [packetNumber] [data] [dataLength] [crc] [requestHandle]</code></p>
</div>
<div class="paragraph">
<p>Sends a part of the binary image data. If the last chunk was smaller than the chunkSize, the rest of the packet should be padded with 0xFF (empty flash). A direct response to the message is not given but periodically the message of actionType::DFU_STATUS will be sent.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">//Sends the dfu data to nodeId 200
dfu_data 200 0 00:00:00:00 4 33984 2</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inquiring_about_dfu"><a class="anchor" href="#_inquiring_about_dfu"></a>Inquiring About DFU</h3>
<div class="paragraph">
<p><code>dfu_all_transmitted [nodeId] [imageSizeInByte] [requestHandle]</code></p>
</div>
<div class="paragraph">
<p>Sends a query to get the status of transmission. It will receive an ok response if the image was fully saved or a request response for missing chunks.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">//Inquires from the device having nodeId 200 about the dfu status
dfu_all_transmitted 200 4 2</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_dfu"><a class="anchor" href="#_installing_dfu"></a>Installing DFU</h3>
<div class="paragraph">
<p><code>dfu_apply [nodeId] [waitSeconds] [imageSizeInByte] [requestHandle]</code></p>
</div>
<div class="paragraph">
<p>Instruct the node to install the update and trigger a reboot in case of fruitymesh update.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">//Device having nodeId 200 will install the updates and will trigger restart after 5 sec
dfu_apply 200 60000 4 2</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dfu_done_received"><a class="anchor" href="#_dfu_done_received"></a>DFU Done Received</h3>
<div class="paragraph">
<p><code>dfu_done_received [nodeId] [requestHandle]</code></p>
</div>
<div class="paragraph">
<p>Instruct the node to stop sending DFU_DONE messages.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">//Device having nodeId 200 will stop sending DFU_DONE messages
dfu_done 200 2</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_messages"><a class="anchor" href="#_messages"></a>Messages</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_message_types"><a class="anchor" href="#_message_types"></a>Message Types</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">enum DFUModuleTriggerActionMessages
{
    DFU_START = 0, // Sent by the gateway, request for update, will clear some free space if ok to receive data
    DFU_CHUNK = 1, //An actual part of the firmware data according to the cunkSize given in DFU_START
    DFU_REQUEST_CHUNKS = 2, //A packet that is asking for some missing chunks that were not recieved previously
    DFU_ALL_TRANSMITTED = 3, //Sent to query the status of transmission (Response will be all transmitted, or a request for chunks)
    DFU_APPLY = 4, //Request to install the finished update
    RESET_DFU_DONE = 6, //Tell the node to stop sending DFU_DONE messages
    START_NRF_SECURE_DFU = 7, //Only used for nordic secure DFU updates
    DFU_START_IGNORE_MASTERID //Starts the dfu but doesn't save the dfuMasterNodeId (used for updates over meshaccess connections)
};
enum DFUModuleActionResponseMessages
{
    DFU_START_RESPONSE = 0, //Answer if DFU update was started
    DFU_CHUNK_RESPONSE = 1, // Currently unused
    DFU_STATUS = 2, //Status of the DFU update in percent (will be sent periodically (randomly) during a DFU update by the nodes
    DFU_ALL_TRANSMITTED_RESPONSE = 3, //Sent after the image has been checked and is ready (a reboot must trigger the update)
    DFU_DONE = 5 //A periodic message indicating that the dfu was finished, must be stopped using RESET_DFU_DONE
};</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_starting_the_dfu_update"><a class="anchor" href="#_starting_the_dfu_update"></a>Starting The DFU Update</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_request"><a class="anchor" href="#_request"></a>Request</h3>
<div class="paragraph">
<p>actionType: DFU_START or DFU_START_IGNORE_MASTERID</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">enum ImageType{
    IMAGE_TYPE_SOFTDEVICE = 0, //Bluetooth stack of the node
    IMAGE_TYPE_APP = 1, //FruityMesh App
    IMAGE_TYPE_APP_FORCED = 2, //FruityMesh App without version check (do not use)
    IMAGE_TYPE_SD_AND_APP = 3, //Bluetooth Stack + Fruitymesh App
    IMAGE_TYPE_BOOTLOADER = 4, //Fruityloader
    IMAGE_TYPE_COMPONENT = 5 //External controller connected via UART, ....
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>The controller will check if all conditions are met and will either
respond with an error or it will clear enough free space and will
respond with ok. if IGNORE_MASTERID is used, the nodeId of the dfuMaster
will not be saved and compared against the dfu start settings for further
packets. This is used when sending the update over meshaccess
connections as we only have a temporary partnerId at all times and it
might change.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connPacketModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses MESSAGE_TYPE_MODULE_TRIGGER_ACTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">firmwareVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer with the version of the update</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">imageType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the update image (ImageType)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">chunkSizeExponent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chunk Size (2^exp) e.g. 0=1, 1=2, 2=4,&#8230;&#8203;. Should
use 6 by default for 64 byte chunk size</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">numChunks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of chunks to
be transmitted for the update</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">imageCRC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">crc16 of the full image
(CRC-CCITT (0xFFFF)),
<a href="https://www.lammertbies.nl/comm/info/crc-calculation.html">https://www.lammertbies.nl/comm/info/crc-calculation.html</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">moduleId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Id of the module that needs to be update, see ModuleIds,
e.g. DFU_MODULE_ID=4 for updating the fruitymesh firmware, or
VS_MODULE_ID=151 for updating an external VS Controller</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">componentId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In case that the module communicates with multiple
external controllers, its id can be specified using the componentId</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_response"><a class="anchor" href="#_response"></a>Response</h3>
<div class="paragraph">
<p>actionType: DFU_START_RESPONSE</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connPacketModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses MESSAGE_TYPE_MODULE_ACTION_RESPONSE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">resultCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of DFU_START_DFU_RESPONSE_CODE_</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If received by a JSON capable device, the dfu_start_response will be printed out like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
	"nodeId": 20,
	"type": "dfu_start_response",
	"module": 4,
	"requestHandle": 0,
	"percent": 20
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error Code</th>
<th class="tableblock halign-left valign-top">Error Handling</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ok</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_SAME_VERSION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">remove node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_RUNNING_NEWER_VERSION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">remove node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_ALREADY_IN_PROGRESS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ok</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_NO_BOOTLOADER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_FLASH_BUSY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">retry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_NOT_ENOUGH_SPACE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_CHUNKS_TOO_BIG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail (Could use smaller
chunk size)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_MODULE_NOT_AVAILABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail only node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_MODULE_NOT_UPDATABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail only node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_COMPONENT_NOT_UPDATEABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">remove node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_MODULE_QUERY_WAITING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(internal error
code, will not be sent)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_TOO_MANY_CHUNKS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail (Master can use
bigger chunk size to fix) Added 18.06.2018</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sending_dfu_data_2"><a class="anchor" href="#_sending_dfu_data_2"></a>Sending DFU Data</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_request_2"><a class="anchor" href="#_request_2"></a>Request</h3>
<div class="paragraph">
<p>actionType: DFU_CHUNK</p>
</div>
<div class="paragraph">
<p>Sends a part of the binary image data. If the last chunk is smaller than
chunkSize, the rest of the packet should be padded with 0xFF (empty
flash).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connPacketModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses
MESSAGE_TYPE_MODULE_TRIGGER_ACTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packetNumber</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the number of the
chunk being sent (0 &#8230;&#8203; numChunks)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">crc16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The crc16 of the chunk</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Binary data according to the chunkSize</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_response_2"><a class="anchor" href="#_response_2"></a>Response</h3>
<div class="paragraph">
<p>No direct response is given to the command, but periodically, the
actionType: DFU_STATUS will be sent</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connPacketModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses MESSAGE_TYPE_MODULE_ACTION_RESPONSE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">percent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 - 100, percent how many packets were saved correctly</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If received by a JSON capable device, the dfu_status will be printed out like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
	"nodeId": 5,
	"type": "dfu_status",
	"module": 4,
	"requestHandle": 0,
	"percent": 40
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asking_if_the_update_was_received_successfully"><a class="anchor" href="#_asking_if_the_update_was_received_successfully"></a>Asking if the update was received successfully</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_request_3"><a class="anchor" href="#_request_3"></a>Request</h3>
<div class="paragraph">
<p>actionType: DFU_ALL_TRANSMITTED</p>
</div>
<div class="paragraph">
<p>This will check if the image was fully saved and will either respond
with ok or with a request for more chunks.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">---</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connPacketModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses MESSAGE_TYPE_MODULE_TRIGGER_ACTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">imageSizeInByte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bytes in the image</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If received by a JSON capable device, the all_transmitted_response will be printed out like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
	"nodeId": 5,
	"type": "all_transmitted_response",
	"module": 4,
	"code": 20,
	"requestHandle": 0
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_response_3"><a class="anchor" href="#_response_3"></a>Response</h3>
<div class="paragraph">
<p>actionType: DFU_ALL_TRANSMITTED_RESPONSE</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connPacketModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses MESSAGE_TYPE_MODULE_ACTION_RESPONSE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">errorCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of DFU_ALL_TRANSMITTED_RESPONSE_CODE_</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error</th>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Error Handling</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_START_DFU_RESPONSE_CODE_OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ok</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_ALL_TRANSMITTED_RESPONSE_CODE_NOT_PARTICIPATING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail (if node
should have participated, can retry update)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_ALL_TRANSMITTED_RESPONSE_CODE_IMAGE_CRC_FAIL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail (Can retry
update)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_request_4"><a class="anchor" href="#_request_4"></a>Request</h3>
<div class="paragraph">
<p>actionType: DFU_REQUEST_CHUNKS</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connPacketModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses MESSAGE_TYPE_MODULE_TRIGGER_ACTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiple of 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">chunk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of chunks that should be sent again by the
DFU master. These should be collected from all nodes (might of course
overlap). Afterwards DFU_ALL_TRANSMITTED should be sent again</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If received by a JSON capable device, the request_chunks will be printed out like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
	"nodeId": 5,
	"type": "request_chunks",
	"module": 4,
	"requestHandle": 0,
	"chunks": [2, 4]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_the_update"><a class="anchor" href="#_installing_the_update"></a>Installing the Update</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_request_5"><a class="anchor" href="#_request_5"></a>Request</h3>
<div class="paragraph">
<p>actionType: DFU_APPLY</p>
</div>
<div class="paragraph">
<p>To install the update, the following command is used and will trigger a
reboot in case of a fruitymesh update. Will not directly generate a
response</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connPacketModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses
MESSAGE_TYPE_MODULE_TRIGGER_ACTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">waitSeconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of seconds
to wait until installing the update</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">imageSizeInBytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The image size
again</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_response_4"><a class="anchor" href="#_response_4"></a>Response</h3>
<div class="paragraph">
<p>actionType: DFU_DONE</p>
</div>
<div class="paragraph">
<p>After an update was completed, the node will periodically send this
packet until it is told to stop.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connPacketModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses MESSAGE_TYPE_MODULE_ACTION_RESPONSE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of the DFU_DONE_CODE_</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If received by a JSON capable device, the dfu_done will be printed out like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
	"nodeId": 5,
	"type": "dfu_done",
	"module": 4,
	"status": 0,
	"requestHandle": 0
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error</th>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Error Handling</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ok</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_COMPONENT_UPDATE_FAILED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Happens if a component
can not handle the update process correctly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_CORRUPT_COMPONENT_IMAGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Happens after a
component received the data and tells us the image is corrupt.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_SENT_TO_COMPONENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">retry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retry sending dfu_apply as
this code is temporary and will resolve as soon as the component was
updated fully.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_COMPONENT_UPDATE_FAILED_CUSTOMER_SPECIFIC_1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
customer specific error code explained in the vendor docs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_COMPONENT_UPDATE_FAILED_CUSTOMER_SPECIFIC_2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
customer specific error code explained in the vendor docs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_COMPONENT_UPDATE_FAILED_CUSTOMER_SPECIFIC_3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
customer specific error code explained in the vendor docs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_COMPONENT_UPDATE_FAILED_CUSTOMER_SPECIFIC_4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
customer specific error code explained in the vendor docs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_COMPONENT_UPDATE_FAILED_CUSTOMER_SPECIFIC_5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
customer specific error code explained in the vendor docs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_COMPONENT_UPDATE_FAILED_CUSTOMER_SPECIFIC_6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
customer specific error code explained in the vendor docs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DFU_DONE_CODE_COMPONENT_UPDATE_FAILED_CUSTOMER_SPECIFIC_7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
customer specific error code explained in the vendor docs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_telling_the_node_to_stop_sending_dfu_done"><a class="anchor" href="#_telling_the_node_to_stop_sending_dfu_done"></a>Telling the node to stop sending DFU_DONE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>actionType: RESET_DFU_DONE</p>
</div>
<div class="paragraph">
<p>In order to stop the node from periodically sending DFU_DONE, this
message is sent</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connPacketModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses MESSAGE_TYPE_MODULE_TRIGGER_ACTION</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>Build with Antora</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script>antoraLunr.init("../../_/../search_index.json")</script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>

  </body>
</html>
